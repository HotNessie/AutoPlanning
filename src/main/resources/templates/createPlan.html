<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

</html>

<head>
  <th:block th:replace="fragments/header :: header" />

  <link rel="stylesheet" href="/css/createPlan.css">
  <link rel="stylesheet" href="/css/selfContent.css">
  <link rel="stylesheet" href="/css/selfPlanContent.css">
  <link rel="stylesheet" href="/css/myPlanList.css">
  <link rel="stylesheet" href="/css/myPlanDetails.css">
</head>

<body>
  <!--<div class="container">-->
  <header>
    <h1 class="logo">
      <!-- Title - 홈페이지?로 이동 -->
      <a link_logo href="/home">
        <div class="icon_home">
          <span class="icon_inner_home" aria-hidden="true">
            <svg class="svg_home" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
              <path
                d="M1.067,15.411l2.075,1.477c1.062,.755,2.317,1.14,3.572,1.14,.893,0,1.787-.195,2.612-.59l12.953-5.698c1.486-.71,2.133-2.504,1.441-4-.694-1.497-2.475-2.152-3.976-1.465l-3.143,1.402L9.982,3.591c-.882-.656-2.05-.774-3.052-.311l-.781,.366c-.611,.287-1.033,.857-1.129,1.525-.096,.669,.148,1.335,.654,1.783l4.204,3.72-3.591,1.602-3.057-1.122c-.984-.359-2.084-.041-2.735,.791-.392,.501-.556,1.132-.462,1.776,.099,.677,.475,1.292,1.033,1.688ZM7,5.457l.776-.364c.332-.154,.721-.113,1.085,.151l5.531,3.418-2.506,1.118L7,5.457ZM2.071,13.179c.098-.125,.224-.169,.334-.169,.05,0,3.574,1.285,3.574,1.285,.245,.09,.515,.081,.752-.025l13.833-6.171,.013-.006c.501-.231,1.096-.012,1.328,.487,.234,.507,.016,1.114-.46,1.342l-12.953,5.698c-1.357,.647-2.964,.51-4.191-.362l-2.075-1.476c-.114-.081-.193-.211-.213-.348-.015-.102,.005-.188,.058-.256Zm21.929,9.821c0,.553-.448,1-1,1H1c-.552,0-1-.447-1-1s.448-1,1-1H23c.552,0,1,.447,1,1Z" />
            </svg>
          </span>
        </div>
        <span class="blind">이성수</span>
      </a>
    </h1>
    <!--메뉴 목록 선택 버튼-->
    <nav>
      <ul>
        <!-- Title - Hot Content -->
        <li id="hot_content_list" class="content_list selected">
          <button id="hotButton" class="contentButton">
            <div class="icon">
              <span class="icon_inner" aria-hidden="true">
                <svg id="hot_menuSvg" class="menu_svg menu_color hover_li" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg" version="1.1">
                  <path
                    d="M16.514,4.213c-1.122-.953-2.282-1.937-3.446-3.1L12,.048,10.941,1.114a14.411,14.411,0,0,0-3.317,6.1c-.015-.052-.029-.1-.043-.157L6.947,4.6,5.1,6.334C3.245,8.073,1.531,10.154,1.53,13.58A10.376,10.376,0,0,0,9.3,23.711a10.984,10.984,0,0,0,2.69.337A10.464,10.464,0,0,0,22.47,13.582C22.47,9.27,19.709,6.926,16.514,4.213Zm.069,15.261c-.109.084-.225.154-.337.232a4.584,4.584,0,0,0,.35-1.753c0-2.539-2.3-3.552-4.6-5.85-2.507,2.507-4.6,3.311-4.6,5.85A4.574,4.574,0,0,0,7.8,19.8,7.469,7.469,0,0,1,4.536,13.58a5.463,5.463,0,0,1,1.137-3.449c.109.172.224.338.346.5a2.253,2.253,0,0,0,2.32.854A2.314,2.314,0,0,0,10.1,9.7a15.809,15.809,0,0,1,2.043-5.316c.844.776,1.67,1.477,2.426,2.12,3.218,2.731,4.9,4.287,4.9,7.078A7.423,7.423,0,0,1,16.583,19.474Z" />
                </svg>
              </span>
            </div>
            <span id="hot_content_span" class="navbar_text menu_color hover_li">Hot</span>
          </button>
        </li>

        <!-- Title - Auto Content -->
        <li id="auto_content_list" class="content_list">
          <button id="autoButton" class="contentButton">
            <div class="icon">
              <span class="icon_inner" aria-hidden="true">
                <svg id="auto_menuSvg" class="menu_svg hover_li" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                  version="1.1">
                  <path
                    d="m21,23c0,.553-.448,1-1,1s-1-.447-1-1c0-2.206-1.794-4-4-4h-6c-2.206,0-4,1.794-4,4,0,.553-.448,1-1,1s-1-.447-1-1c0-3.309,2.691-6,6-6h6c3.309,0,6,2.691,6,6Zm1-15.5v2c0,.827-.673,1.5-1.5,1.5h-.5c0,2.206-1.794,4-4,4h-8c-2.206,0-4-1.794-4-4h-.5c-.827,0-1.5-.673-1.5-1.5v-2c0-.827.673-1.5,1.5-1.5h.5c0-2.206,1.794-4,4-4h3v-1c0-.553.448-1,1-1s1,.447,1,1v1h3c2.206,0,4,1.794,4,4h.5c.827,0,1.5.673,1.5,1.5Zm-4-1.5c0-1.103-.897-2-2-2h-8c-1.103,0-2,.897-2,2v5c0,1.103.897,2,2,2h8c1.103,0,2-.897,2-2v-5Zm-8.5,1c-.828,0-1.5.672-1.5,1.5s.672,1.5,1.5,1.5,1.5-.672,1.5-1.5-.672-1.5-1.5-1.5Zm5,0c-.828,0-1.5.672-1.5,1.5s.672,1.5,1.5,1.5,1.5-.672,1.5-1.5-.672-1.5-1.5-1.5Z" />
                </svg>
              </span>
            </div>
            <span id="auto_content_span" class="navbar_text hover_li">Auto</span>
          </button>
        </li>

        <!-- Title - Self Content -->
        <li id="self_content_list" class="content_list">
          <!-- <li id="myPlanList_content_list" class="content_list"> -->
          <button id="selfButton" class="contentButton">
            <!-- <button id="myPlanListButton" class="contentButton"> -->
            <div class="icon">
              <span class="icon_inner" aria-hidden="true">
                <svg id="self_menuSvg" class="menu_svg hover_li" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                  version="1.1">
                  <path
                    d="M9.732,15.944c.103,.832-.145,1.676-.696,2.376l-.54,.78c-.315,.453-.938,.566-1.392,.25-.454-.315-.565-.938-.25-1.393l.575-.827c.257-.33,.355-.639,.318-.942-.039-.314-.217-.603-.515-.834l-.711-.596c-.552-.427-1.397-.324-1.855,.252l-2.373,2.984c-.46,.58-.376,1.405,.192,1.88l1.026,.8c.366-.411,.894-.675,1.488-.675,1.105,0,2,.895,2,2s-.895,2-2,2c-.718,0-1.343-.382-1.696-.951l-2.074-1.619c-1.435-1.196-1.644-3.243-.502-4.68l2.373-2.984c1.137-1.431,3.234-1.683,4.677-.563l.71,.596c.688,.532,1.141,1.303,1.244,2.146Zm7.768-10.944c1.381,0,2.5-1.119,2.5-2.5s-1.119-2.5-2.5-2.5-2.5,1.119-2.5,2.5,1.119,2.5,2.5,2.5Zm5.947,18.895c-.144,.071-.296,.105-.446,.105-.367,0-.72-.202-.896-.553l-1.866-3.732-5.003-2.899c-1.335-.889-2.016-2.427-1.789-3.951l.572-3.029-2.695,3.423c-.341,.436-.97,.508-1.404,.168-.434-.342-.509-.971-.167-1.404l3.561-4.524c.77-.955,1.905-1.498,3.121-1.498h.633c.867,0,1.69,.374,2.26,1.027s.829,1.52,.712,2.379l-.165,1.152,3.622,2.074c.479,.274,.645,.886,.371,1.365-.185,.322-.522,.503-.869,.503-.168,0-.339-.042-.496-.132l-2.934-1.68-.573,3.995,2.246,1.301c.34,.198,.611,.487,.786,.836l1.866,3.732c.247,.494,.047,1.095-.447,1.342Zm-7.154-8.776l.838,.485,.928-6.475c.039-.284-.045-.565-.238-.786s-.46-.343-.753-.343h-.633c-.012,0-.023,.004-.035,.004l-.98,5.193c-.107,.725,.233,1.494,.874,1.921Zm-1.771,2.784c-.547-.085-1.061,.276-1.152,.82l-.711,4.232c-.091,.545,.276,1.061,.821,1.152,.056,.009,.112,.014,.167,.014,.479,0,.903-.346,.985-.834l.711-4.232c.091-.545-.276-1.061-.821-1.152Z" />
                </svg>
              </span>
            </div>
            <span id="self_content_span" class="navbar_text hover_li">Self</span>
            <!-- <span id="myPlanList_content_span" class="navbar_text hover_li">Self</span> -->
          </button>
        </li>

        <!-- Title - My Plan List -->
        <li id="bookmark_content_list" class="content_list">
          <!-- <button id="bookmarkButton" class="contentButton"> -->
          <button id="myPlanListButton" class="contentButton">
            <div class="icon">
              <span class="icon_inner" aria-hidden="true">
                <svg id="bookmark_menuSvg" class="menu_svg hover_li" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg" version="1.1">
                  <path
                    d="M19.467,23.316,12,17.828,4.533,23.316,7.4,14.453-.063,9H9.151L12,.122,14.849,9h9.213L16.6,14.453ZM12,15.346l3.658,2.689-1.4-4.344L17.937,11H13.39L12,6.669,10.61,11H6.062l3.683,2.691-1.4,4.344Z" />
                </svg>
              </span>
            </div>
            <span id="bookmark_content_span" class="navbar_text hover_li">My</span>
          </button>
        </li>

        <!-- Title - History Content -->
        <li id="history_content_list" class="content_list">
          <button id="historyButton" class="contentButton">
            <div class="icon">
              <span class="icon_inner" aria-hidden="true">
                <svg id="history_menuSvg" class="menu_svg hover_li" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg" version="1.1">
                  <path
                    d="M12,0A12.032,12.032,0,0,0,3.529,3.529L1,1V6.909A1.09,1.09,0,0,0,2.091,8H8L5.647,5.647A8.985,8.985,0,1,1,3,12H0A12,12,0,1,0,12,0Z" />
                  <polygon points="10 7 10 13.621 13.439 17.061 15.561 14.939 13 12.379 13 7 10 7" />
                </svg>
              </span>
            </div>
            <span id="history_content_span" class="navbar_text hover_li">Past</span>
          </button>
        </li>
        <!-- Title - Login / Logout -->
        <li sec:authorize-expr="isAnonymous()" class="content_list">
          <button class="contentButton" onclick="location.href='/login'">
            <div class="icon">
              <span class="icon_inner" aria-hidden="true">
                <!-- SVG for Login Icon (example: person icon) -->
                <svg class="menu_svg hover_li" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                  <path
                    d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                </svg>
              </span>
            </div>
            <span class="navbar_text hover_li">로그인</span>
          </button>
        </li>
        <li sec:authorize="isAuthenticated()" class="content_list">
          <form th:action="@{/logout}" method="post" style="display:inline;">
            <!-- <button class="contentButton" onclick="location.href='/logout'"> -->
            <button class="contentButton" type="submit">
              <div class="icon">
                <span class="icon_inner" aria-hidden="true">
                  <!-- SVG for Logout Icon (example: exit icon) -->
                  <svg class="menu_svg hover_li" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <path
                      d="M17,17.25V14H10V10H17V6.75L22.25,12L17,17.25M10,2A2,2 0 0,1 12,4V8H10V4H4V20H10V16H12V20A2,2 0 0,1 10,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2H10Z" />
                  </svg>
                </span>
              </div>
              <span class="navbar_text hover_li">로그아웃</span>
            </button>
          </form>
        </li>

      </ul>
    </nav>
  </header>
  <!--메뉴 상세-->
  <!-- Title - 메뉴창 fragment -->
  <div id="content">
    <div id="collapseBody">
      <div th:replace="~{fragments/hotContent :: .hotContent}">default message</div>
    </div>

    <!-- Title - 메뉴 여닫기 버튼 -->
    <button id="collapseButton">
      <svg id="rightArrow" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1" display="none">
        <path
          d="M7.412,24,6,22.588l9.881-9.881a1,1,0,0,0,0-1.414L6.017,1.431,7.431.017l9.862,9.862a3,3,0,0,1,0,4.242Z" />
      </svg>
      <svg id="leftArrow" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
        <path
          d="M16.752,23.994,6.879,14.121a3,3,0,0,1,0-4.242L16.746.012,18.16,1.426,8.293,11.293a1,1,0,0,0,0,1.414l9.873,9.873Z" />
      </svg>
    </button>

    <!-- Title - 검색창 -->
    <div id="autocomplete">
      <input id="searchInput" autocomplete="off" type="text" style="color:rgba(255,255,255,0.8)">
      <button id="searchButton" style="color:rgba(193, 84, 236)">검색</button>
      <div id="suggestion">
        <ul id="results" style="color:rgba(255,255,255,0.8)"></ul>
      </div>
    </div>
  </div>

  <div id="map" style="width:125vw; height: 100vh;"></div>

  <!-- Title - 지도 우측 하단 버튼들 -->
  <div class="customBottomRight">
    <!-- 경로 지우기 버튼 clearMarker -->
    <button class="clearRoutesBtn custom-map-control-button">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
        <path
          d="M16.24,3.56L21.19,8.5C21.97,9.29,21.97,10.55,21.19,11.34L12,20.53C10.44,22.09,7.91,22.09,6.34,20.53L2.81,17C2.03,16.21,2.03,14.95,2.81,14.16L13.41,3.56C14.2,2.78,15.46,2.78,16.24,3.56M4.22,15.58L7.76,19.11C8.54,19.9,9.8,19.9,10.59,19.11L14.12,15.58L9.17,10.63L4.22,15.58Z" />
      </svg>
    </button>

    <!-- Title - 모든 마커 보기 버튼 -->
    <button id="fitMarkersBtn" class="custom-map-control-button" title="모든 장소 보기">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
        <path d="M21,21H16v3h5.546A2.457,2.457,0,0,0,24,21.545V16H21Z" />
        <path d="M0,2.455V8H3V3H8V0H2.454A2.457,2.457,0,0,0,0,2.455Z" />
        <path d="M3,16H0v5.545A2.457,2.457,0,0,0,2.454,24H8V21H3Z" />
        <path d="M21.546,0H16V3h5V8h3V2.455A2.457,2.457,0,0,0,21.546,0Z" />
      </svg>
    </button>
  </div>
  <!-- Title - 현재 위치 버튼 -->
  <button class="customCurrentPosition custom-map-control-button">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
      <path
        d="M12,7c-2.757,0-5,2.243-5,5s2.243,5,5,5,5-2.243,5-5-2.243-5-5-5Zm0,8c-1.654,0-3-1.346-3-3s1.346-3,3-3,3,1.346,3,3-1.346,3-3,3Zm11-4h-1.05c-.471-4.717-4.233-8.48-8.95-8.95V1c0-.553-.448-1-1-1s-1,.447-1,1v1.05C6.283,2.52,2.52,6.283,2.05,11H1c-.552,0-1,.447-1,1s.448,1,1,1h1.05c.471,4.717,4.233,8.48,8.95,8.95v1.05c0,.553,.448,1,1,1s1-.447,1-1v-1.05c4.717-.471,8.48-4.233,8.95-8.95h1.05c.552,0,1-.447,1-1s-.448-1-1-1Zm-11,9c-4.411,0-8-3.589-8-8S7.589,4,12,4s8,3.589,8,8-3.589,8-8,8Z" />
    </svg>
  </button>
  <!-- Title - 줌 인 버튼 -->
  <button class="customZoomIn custom-map-control-button">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
      <path
        d="M17,11H13V7a1,1,0,0,0-1-1h0a1,1,0,0,0-1,1v4H7a1,1,0,0,0-1,1H6a1,1,0,0,0,1,1h4v4a1,1,0,0,0,1,1h0a1,1,0,0,0,1-1V13h4a1,1,0,0,0,1-1h0A1,1,0,0,0,17,11Z" />
    </svg>
  </button>
  <button class="customZoomOut custom-map-control-button">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" version="1.1">
      <path d="M7,11a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Z" />
    </svg>
  </button>

  <div th:replace="fragments/footer :: footer" />


  <!--구글 지도 라이브러리-->
  <script>
    fetch("/api/google-maps-key")
      .then(response => response.text()) // 응답을 텍스트로 변환
      .then(apiKey => {
        // Google Maps API 로드
        (g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })({
          key: apiKey,
          v: "weekly",
          libraries: "geometry" // geometry 라이브러리 명시적 추가
        });
      })
      .catch(error => console.error("API 키를 가져오는 데 실패했습니다:", error));
  </script>

  <script type="module" src="js/main.js"></script>

</body>

</html>